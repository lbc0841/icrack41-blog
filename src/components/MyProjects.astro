---
import "../styles/my_projects.css"

import { Border1 } from "../assets/borders.tsx"

---

<div class="project-container">

    <div class="search-bar">
        <i class="fa-solid fa-magnifying-glass"></i>
        <textarea name="a"  cols="5" rows="1"></textarea>
    </div>
    

    <div id="project-view" class="project-view">

        <div class="project">
            <Border1/>
    
            <img class="project-img" src="/icrack41-blog/assets/project_img/my_paint/title_img.png" alt="">
            <b style="font-size: 40px;">畫集</b><br>
            <small>色鉛筆 & 素描</small>
        </div>
            
        <div class="project">
    
            <Border1/>
    
            <img class="project-img" src="/icrack41-blog/assets/project_img/portable_power_supply/title_img.png" alt="">
            <b style="font-size: 40px;">隨身電供</b><br>
            <small>DC2DC 5~12V</small>
            
        </div>
    
        <div class="project">
    
            <Border1/>
    
            <img class="project-img" src="" alt="...">
            <b style="font-size: 40px;">動漫角色建模</b><br>
            <small>Blender 3D建模</small>
        </div>
    
        <div class="project">
    
            <Border1/>
    
            <img class="project-img" src="" alt="...">
            <b style="font-size: 40px;">無人機</b><br>
            <small>就...無人機</small>
        </div>
    
        <div class="project">
    
            <Border1/>
    
            <img class="project-img" src="" alt="...">
            <b style="font-size: 40px;">synaptix</b><br>
            <small>代碼編輯器</small>
        </div>
    
        <div class="project">
    
            <Border1/>
    
            <img class="project-img" src="" alt="...">
            <b style="font-size: 40px;">音樂撥放器</b><br>
            <small>Android</small>
        </div>
        
    </div>
</div>

<script is:browser>

    const projectContainer = document.getElementById('project-view');
    projectContainer.innerHTML = projectContainer.innerHTML.repeat(4);

    const posCenter = (projectContainer.scrollWidth-projectContainer.clientWidth)/2;
    projectContainer.scrollLeft = posCenter;

    function loopScroll(scrollAmount){

        if(projectContainer.scrollLeft > posCenter+10 || projectContainer.scrollLeft < posCenter-10){

            projectContainer.scrollTo({
                left: posCenter,
                behavior: "smooth",
            });
            
            return;
        }

        if(scrollAmount < 0){

            console.log(`<`);

            let lastItem = projectContainer.lastElementChild;
            if(lastItem){
                projectContainer.insertBefore(lastItem, projectContainer.firstElementChild);
                projectContainer.scrollLeft += (lastItem.offsetWidth + 30);
            }
        }
        else if(scrollAmount > 0){
            console.log(`>`);

            let firstItem = projectContainer.firstElementChild;
            if(firstItem){
                projectContainer.appendChild(firstItem);
                projectContainer.scrollLeft -= (firstItem.offsetWidth + 30);
            }
        }

        projectContainer.scrollTo({
            left: posCenter,
            behavior: "smooth",
        });
    }


    projectContainer.addEventListener("wheel", 

        (event) => {
            event.preventDefault();
            loopScroll(event.deltaY);
        },
        { passive: false },
    );

    
    
</script>

