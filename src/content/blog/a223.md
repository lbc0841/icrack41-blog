---
title: "a223. 10298 - Power Strings"
description: ""
date: 2025-05-16
tags: ["cpp"]
---

## è§£æ³•ä¸€ã€KMP

### ğŸ”¹ æœ€é•·å…¬å…±å‰å¾Œç¶´

é–‹ä¸€å€‹å¤§å°ç‚º `s.size()` çš„çŸ©é™£ `kmp[]`<br>
å…¶ä¸­ `kmp[i]` ç´€éŒ„çš„æ˜¯ `s[0] ~ s[i]` çš„ **æœ€é•·èµ·å§‹ä½ç½®ä¸åŒçš„å‰å¾Œç¶´å­—ä¸²** çš„é•·åº¦

åˆå§‹åŒ– `kmp[0] = 0` (`s[0]` è·Ÿ `s[0]` èµ·å§‹ä½ç½®ç›¸åŒ)<br>
å¦‚æœ `s[i] = s[kmp[i-1]]` å‰‡ `kmp[i] = kmp[i-1] + 1`<br>
å¦å‰‡ `kmp[i] = 0`

æœ€çŸ­é‡è¤‡å­å­—ä¸²é•·åº¦ = `s.size()` - `kmp.back()`<br>
æœ€å¤§é‡è¤‡æ¬¡æ•¸ = `s.size()` / `é‡è¤‡å­å­—ä¸²é•·åº¦`

é©—è­‰ `s.size()` / `é‡è¤‡å­å­—ä¸²é•·åº¦` èƒ½æ•´é™¤<br>
å¦å‰‡æœ€å¤§é‡è¤‡æ¬¡æ•¸ = 1

### ğŸ”¸ e.g. `s = "AAABAAAB"`

<font color="#00bb00">ç¶ å­—</font> è¡¨ç¤º **æœ€é•·èµ·å§‹ä½ç½®ä¸åŒçš„å‰å¾Œç¶´å­—ä¸²**<br>
<font color="#ff0000">ç´…å­—</font> ä»£è¡¨åŒ¹é…éŒ¯èª¤ (`kmp[i] = 0`)<br>
åº•ä¸‹çš„æ•¸å­—æ˜¯å­—ä¸²é•·åº¦ (`kmp[i]`)

| A<br>A | A<br>A | A<br>A | B<br>B | A<br>A | A<br>A | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 |   |   |   |   |   |   |   |

| <font color="#00bb00">A</font><br>A | A<br><font color="#00bb00">A</font> | A<br>A | B<br>B | A<br>A | A<br>A | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 |   |   |   |   |   |   |

| <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | B<br>B | A<br>A | A<br>A | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 |   |   |   |   |   |

| <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br><font color="#00bb00">A</font> | <font color="#ff0000">A</font><br><font color="#00bb00">A</font> | B<br><font color="#ff0000">B</font> | A<br>A | A<br>A | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 | 0 |   |   |   |   |

| <font color="#00bb00">A</font><br>A | A<br>A | A<br>A | B<br>B | A<br><font color="#00bb00">A</font> | A<br>A | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 | 0 | 1 |   |   |   |

| <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br>A | A<br>A | B<br>B | A<br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | A<br>A | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 | 0 | 1 | 2 |   |   |

| <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br>A | B<br>B | A<br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | B<br>B |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 | 0 | 1 | 2 | 3 |   |

| <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br>A | <font color="#00bb00">A</font><br>A | <font color="#00bb00">B</font><br>B | A<br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | A<br><font color="#00bb00">A</font> | B<br><font color="#00bb00">B</font> |
|---|---|---|---|---|---|---|---|
| 0 | 1 | 2 | 0 | 1 | 2 | 3 | 4 |

å› æ­¤ `AAABAAAB` æœ€çŸ­é‡è¤‡å­å­—ä¸²é•·åº¦ç‚º<br>
`s.size()` - `kmp.back()` = 4

é‡è¤‡æ¬¡æ•¸ç‚º<br>
`s.size()` / `é‡è¤‡å­å­—ä¸²é•·åº¦` = 2

### âœ… å®Œæ•´ä»£ç¢¼

è©•åˆ†çµæœ(åƒè€ƒ) ï¼š **<font color="#00bb00">AC</font> (0.1s, 9.8MB)**

```cpp
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    string s;
    while (cin >> s && s != ".") {
        int size = s.size();

        vector<int> kmp(size);
        for(int i=1; i<size; i++){
            int j = kmp[i-1];
            while(j>0 && s[i]!=s[j]){
                j = kmp[j - 1];
            }
            if(s[i] == s[j]){
                j++;
            }
            kmp[i] = j;
        }
    
        int p = size - kmp.back(); // period

        if(size%p == 0){
            cout << size/p << "\n";
        }
        else{
            cout << 1 << "\n";
        }
    }

    return 0;
}
```

***

## è§£æ³•äºŒã€çª®èˆ‰

### ğŸ”¹ çª®èˆ‰å› æ•¸

çª®èˆ‰é‡è¤‡å­—ä¸²å¯èƒ½çš„é•·åº¦<br>
åªæœ‰é•·åº¦æ˜¯ `s.size()` çš„å› æ•¸çš„ é‡è¤‡å­—ä¸²é•·åº¦ æ‰èƒ½è®“ å­—ä¸²é‡è¤‡æ¬¡æ•¸ æ˜¯æ•´æ•¸<br>
ç„¶å¾Œå°æ¯å€‹ä½ç½®åˆ¤æ–·æ˜¯å¦ç›¸åŒ

### âœ… å®Œæ•´ä»£ç¢¼

è©•åˆ†çµæœ(åƒè€ƒ) ï¼š **<font color="#00bb00">AC</font> (44ms, 2.2MB)**

```cpp
#include <bits/stdc++.h>
using namespace std;

string s;

bool check(int size){
    for(int i=size; i<s.size(); i++){
        if(s[i] != s[i-size]) return false;
    }
    return true;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    while (cin >> s && s != ".") {
        int ans = 1;
        int size = s.size();

        for(int i=1; i<=size/2; i++){
            if(size%i != 0) continue;
            
            if(check(i)){
                ans = size/i;
                break;
            }
        }
    
        cout << ans << "\n";
    }

    return 0;
}
```
