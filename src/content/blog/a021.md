---
title: "a021. 大數運算"
description: ""
date: 2025-05-16
tags: ["cpp"]
--- 

## 解法一、模擬

用陣列模擬加減乘除過程

### ✅ 完整代碼

評分結果(參考) ： **<font color="#00bb00">AC</font> (2ms, 356KB)**

```cpp
#include <bits/stdc++.h>
using namespace std;

// a >= b
bool ageb(vector<int> a, vector<int> b){
    int size = max(a.size(), b.size());
    a.resize(size);
    b.resize(size);

    for(int i=a.size()-1; i>=0; i--){
        if(a[i] != b[i]) return a[i] > b[i];
    }
    
    return true;
}

// +
vector<int> add(vector<int>& a, vector<int>& b){
    int size = max(a.size(), b.size());
    a.resize(size);
    b.resize(size);
    
    vector<int> ans;
    
    int x = 0;
    for(int i=0; i<size; i++){    
        int res = a[i] + b[i] + x;
        ans.push_back(res%10);
        x = res/10;
    }
    if(x) ans.push_back(x);

    while(ans.size()>1 && ans.back()==0) ans.pop_back();
    return ans;
}

// -
vector<int> sub(vector<int> a, vector<int> b){
    int size = max(a.size(), b.size());
    a.resize(size);
    b.resize(size);
    
    vector<int> ans;
    
    int x = 0;
    for(int i=0; i<size; i++){
        int res = a[i] - b[i] + x;
        
        if(res < 0){
            res += 10;
            x = -1;
        }
        else{
            x = 0;
        }
        ans.push_back(res);
    }

    while(ans.size()>1 && ans.back()==0) ans.pop_back();
    return ans;
}

// *
vector<int> mul(vector<int> a, vector<int> b){
    int size = a.size() + b.size();
    vector<int> ans(size, 0);

    for(int i=0; i<a.size(); i++){
        for(int j=0; j<b.size(); j++){
            ans[i+j] += a[i]*b[j]; 
        }
    }

    for(int i=0; i<ans.size()-1; i++){
        ans[i+1] += ans[i]/10;
        ans[i] %= 10;
    }

    while(ans.size()>1 && ans.back()==0) ans.pop_back();
    return ans;
}

// /
vector<int> div(vector<int> a, vector<int> b){
    vector<int> ans(a.size(), 0);
    vector<int> cur;

    for(int i=a.size()-1; i>=0; i--){
        cur.insert(cur.begin(), a[i]);
        
        while(ageb(cur, b)){
            cur = sub(cur, b);
            ans[i]++;
        }
    }

    while(ans.size()>1 && ans.back()==0) ans.pop_back();
    return ans;
}

int main(){
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    string s1, s2;
    char op;

    cin >> s1 >> op >> s2;
    
    vector<int> a(s1.size());
    vector<int> b(s2.size());
    vector<int> ans;
        
    for(int i=0; i<a.size(); i++) a[i] = s1[a.size()-i-1] - '0';
    for(int i=0; i<b.size(); i++) b[i] = s2[b.size()-i-1] - '0';
        
    bool neg = !ageb(a, b) && op=='-';
        
    if     (op == '+') ans = add(a, b);
    else if(op == '-') ans = neg ? sub(b, a) : sub(a, b);        
    else if(op == '*') ans = mul(a, b);
    else if(op == '/') ans = div(a, b);
        
    if(neg) cout << "-";
    for(int i=ans.size()-1; i>=0; i--){
        cout << ans[i];
    }

    return 0;
}
```
